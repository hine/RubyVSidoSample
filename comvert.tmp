cat motion.txt | nkf | grep '_POSE' | awk -F '-' '{print $1, $2}' | awk -F '[' '{print $2, $3}' | awk -F ']' '{print $1 "," $2}' | sed 's/  //' | gawk -F ',' 'function calc(str){num = strtonum(str); if (num > 0x7fff) num-=0x10000;return num/-220} {print "    {\"pose_id\": " NR-1 ", \"time\": " $1 ", \"servo\": {\"2\": " calc($26)+45 ", \"3\": " calc($8)-45 ", \"4\": " calc($13)-45 ", \"6\": " calc($2)+45 ", \"7\": " calc($7)+45 ", \"10\": " calc($25)+45 ", \"11\": " calc($20)+45 ", \"16\": " calc($19)-45 ", \"17\": " calc($14)-45 ", \"23\": " calc($27)+45 ", \"31\": " calc($29) "}, \"led\": " (calc($31)*-220+0x8000)/0xffff*100 ", \"next\": 0},"}'

